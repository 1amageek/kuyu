# Kuyūkai Implementation Plan

## 目的
決定論的な検証世界を実装し、M1 の KUY-ATT-1 シナリオで検証可能にする。

## スコープ境界
- **含む**: 時間モデル、6-DOF 植物、センサ/外乱、実行順序、決定論ティア、検証ログ。
- **含まない**: Manas のプロトコル意味論、シンボリック制御、制御器仕様。

## 主要設計方針
- 時間は固定ステップ Δt のみ。実行順序は厳密固定。
- RK4 必須、クォータニオンは毎ステップ正規化。
- CUT はブラックボックス。真値やシミュレータ内部は渡さない。

## 実装フェーズ
### 1) コア時間ループ
- `StepWorld(Δt)` とサブシステム更新順序の実装
- ログ（シード、シナリオ ID、Δt、タイムスタンプ）

### 2) 植物・アクチュエータ
- 6-DOF quadrotor（Kuyūkai-QuadRef v0）
- モータ 1 次遅れ、ミキサ行列

### 3) センサ・外乱
- IMU6 センサ（index 0..5 固定）
- ノイズ/バイアス/ドリフト/遅延（seeded）
- トルク外乱（必須）、必要なら力外乱

### 4) 決定論ティアとリプレイ
- Tier0: bitwise ログ一致
- Tier1: ε 許容差
- Tier2: 統計的不変量（M1 では既定で不可）

### 5) シナリオスイート
- KUY-ATT-1（SCN-1..5）を実装
- B2 用 KUY-ATT-PERM をオプションとして準備

## 主要マイルストーン
- **K-1**: 固定ステップ + 実行順序
- **K-2**: 植物/アクチュエータ/センサ
- **K-3**: KUY-ATT-1 実行 + ログ/判定

## 受け入れ条件
- Paper 2 の MUST/SHALL を満たす
- 検証ログが仕様必須項目を含む

